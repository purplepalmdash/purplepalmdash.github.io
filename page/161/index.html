<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en lang=en-us><head><meta name=generator content="Hugo 0.64.0"><link href=http://gmpg.org/xfn/11 rel=profile><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><title>Dash &#183; Dash</title><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css><link rel=stylesheet href="https://purplepalmdash.github.io/css/poole.css?ref=abc124"><link rel=stylesheet href="https://purplepalmdash.github.io/css/hyde.css?ref=abc124"><link rel=stylesheet href="https://purplepalmdash.github.io/css/poole-overrides.css?ref=abc124"><link rel=stylesheet href="https://purplepalmdash.github.io/css/hyde-overrides.css?ref=abc124"><link rel=stylesheet href="https://purplepalmdash.github.io/css/hyde-a.css?ref=abc124"><link rel=stylesheet href="https://purplepalmdash.github.io/css/custom-additions.css?ref=abc124"><link rel=stylesheet href=https://purplepalmdash.github.io/css/highlight/googlecode.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.min.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/styles/docco.min.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/1.10.2/jquery.min.js></script><script type=text/javascript src=/js/html2canvas.js></script><script type=text/javascript>function genPostShot(){var rightNow=new Date();var imageName=rightNow.toISOString().slice(0,16).replace(/(-)|(:)|(T)/g,"");imageName+='.jpg'
html2canvas(document.getElementsByClassName('post'),{background:'#FFFFFF',onrendered:function(canvas){$('#test').attr('href',canvas.toDataURL("image/jpeg"));$('#test').attr('download',imageName);$('#test')[0].click();}});};</script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/highlight.min.js></script><script>hljs.initHighlightingOnLoad();</script><link rel=apple-touch-icon-precomposed sizes=144x144 href="http://purplepalmdash.github.io/touch-icon-144-precomposed.png?ref=abc124"><link href="http://purplepalmdash.github.io/favicon.png?ref=abc124" rel=icon><link href=%7balternate%20%7bRSS%20application/rss+xml%20%20index%20alternate%20%20false%20false%20true%20false%20false%200%7d%20/index.xml%20http://purplepalmdash.github.io/index.xml%7d rel=alternate type=application/rss+xml title="Dash &#183; Dash"><meta name=description content><meta name=keywords content="unix,virtualization,embedded,linux"></head><body class=theme-base-0c><div class=sidebar><div class="container sidebar-sticky"><div class=sidebar-about><img src=http://purplepalmdash.github.io/images/mylogo.jpeg alt=gravatar><h1><a href=http://purplepalmdash.github.io/>很惭愧，就做了一点微小的工作</a></h1><a href=http://purplepalmdash.github.io/><p>Dash</p></a></div><ul class=sidebar-nav><li class=sidebar-nav-item><a href=http://purplepalmdash.github.io/post/>All Posts</a></li><li class=sidebar-nav-item><a href=http://purplepalmdash.github.io/categories/technology/>Technology</a></li><li class=sidebar-nav-item><a href=http://purplepalmdash.github.io/categories/life/>Life</a></li><li class=sidebar-nav-item><a href=http://purplepalmdash.github.io/categories/linuxtips/>LinuxTips</a></li></ul><ul class=sidebar-nav><li class=sidebar-nav-item><a href=https://github.com/purplepalmdash><i class="fa fa-github-square fa-3x"></i></a><a href=https://cn.linkedin.com/in/yang-feipeng-1b909319><i class="fa fa-linkedin-square fa-3x"></i></a><a href=https://plus.google.com/u/0/106572959364703833986><i class="fa fa-google-plus-square fa-3x"></i></a><a href=https://www.facebook.com/yang.feipeng><i class="fa fa-facebook-square fa-3x"></i></a><a href=https://twitter.com/dashwillfly><i class="fa fa-twitter-square fa-3x"></i></a></li></ul></div></div><div class="content container"><div class=posts><div class=post><h1 class=post-title><a href=http://purplepalmdash.github.io/2014/11/24/upgrade-openwrt-on-mw151rm3g/>Upgrade OpenWRT on MW151RM3G</a></h1><span class=post-date>Nov 24, 2014<br><a class=a_cat href=http://purplepalmdash.github.io/categories/technology>Technology</a></span><h3 id=prepare>Prepare</h3><p>First go to <a href=http://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/>http://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/</a>, find the &ldquo;wr703n&rdquo;, download the 2 files.</p><pre><code>$ ls -l openwrt*
-rw-r----- 1 Trusty root 3932160 Nov 24 13:50 openwrt-ar71xx-generic-tl-wr703n-v1-squashfs-factory.bin
-rw-r----- 1 Trusty root 3342340 Nov 24 13:50 openwrt-ar71xx-generic-tl-wr703n-v1-squashfs-sysupgrade.bin

</code></pre><p>sysupgrade.bin is for upgrading.</p><h3 id=upgrade>Upgrade</h3><p>System-> Backup/Flash Firmware.<br>Flash New firmware image, choose File. Select the sysupgrade.bin, Upgrade.</p><p>Tehn you have to wait for the changes to be applied, around half a miniutes, then everything will be OK.</p><h3 id=use-flash-disk-for-booting>Use Flash Disk For Booting</h3><p>Cause the inner storage is only 4M-BYTE, we have to enlarge it via adding the external flash disk .</p><pre><code>$ opkg update
$ opkg install block-mount kmod-usb-storage fdisk

</code></pre><p>Comparing to Attitude Adjustment, the kmod-fs-ext4 couldn&rsquo;t be installed, thus we have to formt the flash disk into ext3 format.</p><p>Cause we won&rsquo;t installed the kmod-fs-ext4, so the external system couldn&rsquo;t be used, this time just flash back the Attitude Adjustment.</p><h3 id=rootfs-on-external-storage>Rootfs on External Storage</h3><p>Copy the filesystem into the external disk:</p><pre><code>root@OpenWrt:/mnt/sda2# tar -C /overlay -cvf - . | tar -C /mnt/sda2 -xf -
root@OpenWrt:/mnt/sda2# ls
etc         lib         lost+found  mnt         sbin        usr

</code></pre><p>Configure the /etc/config/fstab:</p><pre><code>config mount
        option target   /overlay
        option device   /dev/sda2
        option fstype   ext3
        option options  rw,sync
        option enabled  1
        option enabled_fsck 0

</code></pre><p>Reboot and you got 8G rootfs enabled router.</p><h3 id=wireless--wired>Wireless-> Wired.</h3><p>First set the wireless port to client mode:<br><img src=/images/wireless_client.jpg alt=/images/wireless_client.jpg></p><p>Then set the wired port to static address:<br><img src=/images/wired_config.jpg alt=/images/wired_config.jpg></p><p>Now reset your router and connect the ethernet port with a line, the equipments who only have ethernet could use router&rsquo;s wireless signal for accessing the network.<br>Later when I study in the library, this router could easily transfer the signal from wireless to wired and let surfacePro work properly.</p></div><div class=post><h1 class=post-title><a href=http://purplepalmdash.github.io/2014/11/23/dnscrypt-plus-ssh/>DNSCrypt+ssh</a></h1><span class=post-date>Nov 23, 2014<br><a class=a_cat href=http://purplepalmdash.github.io/categories/technology>Technology</a></span><p>Sometips for recording how to cross the greatfxxewall:</p><h3 id=ssh>SSH</h3><p>Use following command for forwarding your flow to remote machine:</p><pre><code>alias enablexx='ssh -C -qTfnN -D 1395 root@xxx.xxx.xxx.xxx

</code></pre><p>xxx.xxx.xxx.xxx should be the machine outside of China.<br>Then in your browser set the proxy to 127.0.0.1:1395, while this is the socket proxy, so choose sock4/sock5 for configuration parameters.</p><h3 id=dns-cryption>DNS Cryption</h3><p>For the DNS flow will be hijacked by greatfxxxewall, we have to encrypt all of the traffics for DNS Querying.</p><p>DNSCrypt is a piece of software that encrypts DNS traffic between the user and a DNS resolver, preventing spying, spoofing or man-in-the-middle attacks.<br>Install it via:</p><pre><code>$ sudo pacman -S  dnscrypt-proxy

</code></pre><p>Then modify the <code>/etc/resolv.conf</code> content to:</p><pre><code># Generated by resolvconf
nameserver 127.0.0.1

</code></pre><p>Previously it would be <code>10.0.0.1</code>, but after we enabled the DNS cryption, we will use our own dns server as in 127.0.0.1.<br>Note: In office I won&rsquo;t change this file because the DNS is safe in ALU.</p><p>Start/Stop the service via:</p><pre><code>### encrypt my dns flow
alias enabledns='sudo systemctl start dnscrypt-proxy.service'
alias disdns='sudo systemctl stop dnscrypt-proxy.service'

</code></pre><p>Above 2 lines has been written to ~/.zshrc, so everytime I just type enable/dis(dns) I could enable/disable the DNS encryption.</p></div><div class=post><h1 class=post-title><a href=http://purplepalmdash.github.io/2014/11/23/tips-on-30days30skills/>Tips on 30Days30Skills(1)</a></h1><span class=post-date>Nov 23, 2014<br><a class=a_cat href=http://purplepalmdash.github.io/categories/technology>Technology</a></span><h3 id=day-3---flask>Day 3 - Flask</h3><p>First install the virtualenv environment via:</p><pre><code>$ brew install pyenv-virtualenv

</code></pre><p>Create the 2.7 virtualenv of python, first you have to install 2.7(before you could use list for listing all of the aviable versions), then use following command for creating the 2.7 virtualenv for developing flask:</p><pre><code>$ eval &quot;$(pyenv init -)&quot;
$ pyenv install --list
$ pyenv install 2.7
$ pyenv virtualenv 2.7 venv_For_Flask_2.7
$ pyenv versions
$ pyenv activate venv_For_Flask_2.7
(venv_For_Flask_2.7)Yosemite:~ Trusty$ pip install flask

</code></pre><p>Git clone the project from github, then install via the requirement.txt:</p><pre><code>$ git clone https://github.com/shekhargulati/instant-flask-web-development-book-app.git scheduleapp
$ cd scheduleapp/
$ pip install -r requirements.txt
$ python manage.py create_tables
$ python manage.py runserver

</code></pre><p>Now you could visit the http://localhost:5000 for viewing the result.</p><p>Since you created this appliation, so it&rsquo;s very easy for deploying it on Openshift.</p><p>Install rhc on Mac, before install, make sure your network is configured OK(mine is set the proxy via ):</p><pre><code>sudo gem install rhc

</code></pre><p>Run following command for setup the rhc on your own machine:</p><pre><code>rhc setup

</code></pre><p>Deploy the app via following command;</p><pre><code>MacBook-Air-di-Trusty:schedulingapp Trusty$ rhc create-app schedapp python-2.7 postgresql-9.2 --from-code=https://github.com/shekhargulati/schedapp-openshift.git

</code></pre><p>After deployment, the following app will be available for accessing:<br><a href=http://schedapp-kkkttt.rhcloud.com/>http://schedapp-kkkttt.rhcloud.com/</a></p><h3 id=day-4---predictionio>Day 4 - PredictionIO</h3><p>Install Vagrant and its plug-ins:</p><pre><code>$ sudo pacman -S vagrant
$ vagrant plugin install vagrant-login vagrant-share

</code></pre><p>Download the latest PredictionIO-Vagrant:</p><pre><code>$ wget https://github.com/PredictionIO/PredictionIO-Vagrant/archive/v0.8.2.tar.gz

</code></pre><p>For working under proxy, install vagrant-proxyconf plugins:</p><pre><code>$ vagrant plugin install vagrant-proxyconf

</code></pre><p>Add following to</p><pre><code>  # Proxy Setting
  config.proxy.http = &quot;http://1xx.x.xx.xxx:2xxx&quot;
  config.proxy.https = &quot;http://1xx.x.xx.xxx:2xxx&quot;
  config.proxy.no_proxy = &quot;localhost,127.0.0.1&quot;
end

</code></pre><p>Following the tutorial may cause error, so I follow the guideline from the official website:</p><pre><code>$ vagrant box add precise64 http://files.vagrantup.com/precise64.box

</code></pre><p>Then go the downloaded folder and start the vagrant:</p><pre><code>$ pwd
/media/y/Vagrant/PredictionIO/PredictionIO-Vagrant-0.8.2
$ vagrant up

</code></pre><p>Now login into the vagrant machine and add the new user:</p><pre><code>$ vagrant ssh
vagrant@precise64:~$ /opt/PredictionIO/bin/users 
Warning: JAVA_HOME environment variable is not set.

PredictionIO CLI User Management

1 - Add a new user
2 - Update email of an existing user
3 - Change password of an existing user
Please enter a choice (1-3): 1
Adding a new user
Email: kkkttt@gmail.com
Password: ********
Retype password: ********
First name: Trusty
Last name: mao
User added

</code></pre><p>For settingup the vagrant in opensuse:</p><pre><code>$ wget https://dl.bintray.com/mitchellh/vagrant/vagrant_1.6.5_x86_64.rpm
$ rpm -ivh vagrant_1.6.5_x86_64.rpm
$ which vagrant
/usr/bin/vagrant 
$ vagrant box add precise64 http://files.vagrantup.com/precise64.box
$ vagrant plugin install vagrant-proxyconf

</code></pre><p>Previous version won&rsquo;t create the user successfully, then I switch to 0.6.5, thus everything goes OK.</p><p>After Added the users, you could visit the webpage at &ldquo;http://localhost:9000&rdquo;</p><p>Add the application named &ldquo;blog-recommender&rdquo; in the webpage.</p><h4 id=eclipse-setup>Eclipse Setup</h4><p>The Url for input in the elipse is:<br><a href=http://download.eclipse.org/technology/m2e/releases>http://download.eclipse.org/technology/m2e/releases</a></p><p>Install the m2eclipse via following methods:<br><img src=/images/eclipseplugins_m2eclipse1.jpg alt=/images/eclipseplugins_m2eclipse1.jpg>
Then:<br><img src=/images/eclipseplugins_m2eclipse2.jpg alt=/images/eclipseplugins_m2eclipse2.jpg></p><p>Create project via:<br><img src=/images/createmaven.jpg alt=/images/createmaven.jpg><br>You will encounter error, simply download the catelog file from:<br><a href=http://repo1.maven.org/maven2/archetype-catalog.xml>http://repo1.maven.org/maven2/archetype-catalog.xml</a>_<br>Then add the catalog file like following:<br><img src=/images/addcatalog.jpg alt=/images/addcatalog.jpg><br>Now re-create the project :<br><img src=/images/maven_archetype_quickstart.jpg alt=/images/maven_archetype_quickstart.jpg></p><p>But this won&rsquo;t solve the problem, we have to install maven manually in ArchLinux:</p><pre><code>$ sudo pacman -S maven
$ # fetch the files from: 
	http://mirrors.ibiblio.org/pub/mirrors/maven2/org/apache/maven/archetypes/maven-archetype-quickstart/
	maven-archetype-quickstart-1.1.jar
$ mvn install:install-file -DgroupId=org.apache.maven.archetypes -DartifactId=maven-archetype-webapp -Dversion=1.0 -Dpackaging=jar -Dfile=maven-archetype-weba
pp-1.0.jar

</code></pre><p>Now re-new the configuration.</p><p>This method is not OK, finally I downloaded the Eclipse Kepler and place it under the <code>/media/y/Vagrant/eclipse</code>, this time it could create the project successfully, but it failed when creating classes, complaing that missing some dependencies.</p></div><div class=post><h1 class=post-title><a href=http://purplepalmdash.github.io/2014/11/23/zhong-zhuang-shou-ji/>重装手记</a></h1><span class=post-date>Nov 23, 2014<br><a class=a_cat href=http://purplepalmdash.github.io/categories/technology>Technology</a></span><p>昨晚的安装还是没能解决问题，所以今天重新来一次。</p><h3 id=安装步骤>安装步骤</h3><p>1. 插入Yosemite USB安装盘，选择"Ignore caches and inject kext"后按回车，进入到Yosemite安装界面。这时候的语言界面是意大利语的。分区选择Utility-> Utility Disco, 点击磁盘，按Inizilalizza， 输入Name后按Inizializza. 再一次确认也是Inizilalizza. 分区完毕后点x返回到安装界面，点击Continua-> Continua-> Accetta后选择Hard磁盘, Continua. 这时弹出拷贝窗口，需要等待大概15分钟时间用于拷贝/安装到磁盘。安装完毕后会自动重启。</p><p>2. 重启后需要选择"Boot Mac OS X from Hard&rdquo;, 空格后选择"Ignore caches and inject kext&rdquo; 后回车，这时会进入到一个配置界面。首选选择时区，点击Mostra tuite后选择你要的时区后, Continua, 然后选择键盘布局，USA, Continua, 网络配置选择"II mio computer non si connette a Internet&rdquo;, Continua, Continua, 而后选择Non trasferrie informazioni adesso, Continua, Accetto, Accetta, 接着输入用户名/密码， Continua, 再一次Continua后进入Configuro iL Mac界面后，登录成功。</p><p>3. 在登录后的界面里，首先安装Clover到系统硬盘Hard,这样下一次我们就可以不用插入优盘以进行引导了。Clover安装时选择Install in UEFI和Drivers64UEFI。而后用UEFI Mount加载上系统真正的UEFI分区后，把根目录下的EFI目录全盘拷贝到系统UEFI分区下。同时使用KextDrop.dmg drop同用的Kext到系统。重启。</p><p>4. Drop Yosemite自己的驱动后，重启。这时候的声卡，USB, 蓝牙等应该都已经驱动上了。由于我们使用了修改过的Display驱动，DP口现在也应该是好的。开始安装有线/无线驱动。安装完毕后系统自动要求重启。</p><p>5. 重启完毕后可以直接链入网络，为了可以访问App Store， 删除掉系统里所有网络配置，删除掉/Library/Preferences/SystemConfiguration/NetworkInterfaces.plist, 重启。这将使得我们手动配置网卡的build-in模式。</p><p>6. 手动添加网络，打开App Store，尝试安装一个软件，看是否如愿，如果OK，那么恭喜你。如果不OK，接着走下一步。我这里出现的错误是"Your device or computer could not be verified, Contact support for assistance.&rdquo; 下载NullEthernet包，drop之。并使用MaciASL, Apply patch.txt. 完成这些后重启。</p><p>7. 重启后依然无法访问，吃欧冠内心删除所有的网卡驱动，重新删除/L/P/S/NetworkInterfaces.plist, 重启。重新添加USB网卡，访问App Store. 好了，现在你可以访问，享受之。</p><h3 id=可能存在的问题>可能存在的问题</h3><p>插入USB无线网卡可能会造成系统不稳定。譬如蓝牙丢失之类。这和驱动的稳定性有关系。所以在我的SurfacePro上我打算采用不稳定的驱动，我会采用一个便携式路由器把无线转成有线的功能。</p></div><div class=post><h1 class=post-title><a href=http://purplepalmdash.github.io/2014/11/22/moving-system-on-1t-harddisk-3/>Moving System on 1T Harddisk(3)</a></h1><span class=post-date>Nov 22, 2014<br><a class=a_cat href=http://purplepalmdash.github.io/categories/technology>Technology</a></span><p>In fact this series is not only for customization of the surface pro, it becomes the written-tips for what I&rsquo;ve installed on my ArchLinux. So later all of the necessary packages installation I will record them here.</p><p>1. postgres<br>Install via:</p><pre><code>sudo pacman -S postgresql

</code></pre><p>Start postgresql service:</p><pre><code>$ sudo systemctl start postgresql

</code></pre><p>Now begin to configurate the postgres:</p><pre><code>$ sudo -i -u postgres
[postgres@kkkttt ~]$ initdb --locale en_US.UTF-8 -E UTF8 -D '/var/lib/postgres/data'
[postgres@kkkttt ~]$ createuser --interactive
Enter name of role to add: kkkt
Shall the new role be a superuser? (y/n) y

</code></pre><p>Test of create temp db via:</p><pre><code>[kkkt@/usr/lib/systemd/system]$ createdb kkkttmp    

</code></pre><p>2. dhclient<br>Sometime we really need this dhclient for debugging. Especially when you want to get the specified port address.</p><pre><code>sudo pacman -S dhclient 

</code></pre><p>3. dnscrypt-proxy<br>At most of the times the dns will be pulluted, so need this guy for sending the encrypted quest and get the response the safe DNS provider.</p><pre><code>sudo pacman -S  dnscrypt-proxy

</code></pre><p>4. cmake<br>For making some opensource projects:</p><pre><code>sudo pacman -S cmake

</code></pre><p>5. cbatticon<br>This little tool is for displaying battery status at the tray, install it via:</p><pre><code>sudo pacman -S cbatticon

</code></pre><p>Add it to the singleview/dualview/triview setting files.</p><p>6. nitrogen<br>For setting up different picture at startup.</p><pre><code>$ sudo pacman -S nitrogen

</code></pre><p>Add following line into the startup file:</p><pre><code>$ nitrogen --restore

</code></pre><p>7. nmap<br>For scannning all of the living machine in the LAN.</p><pre><code>sudo pacman -S namp 

</code></pre><p>Scan via:</p><pre><code>nmap -sP 192.168.1.*

</code></pre></div><ul class=pagination><li class=page-item><a href=/ class=page-link aria-label=First><span aria-hidden=true>&#171;&#171;</span></a></li><li class=page-item><a href=/page/160/ class=page-link aria-label=Previous><span aria-hidden=true>&#171;</span></a></li><li class=page-item><a class=page-link href=/>1</a></li><li class=page-item><a class=page-link href=/page/2/>2</a></li><li class=page-item><a class=page-link href=/page/3/>3</a></li><li class="page-item disabled"><span aria-hidden=true>&nbsp;&mldr;&nbsp;</span></li><li class=page-item><a class=page-link href=/page/160/>160</a></li><li class="page-item active"><a class=page-link href=/page/161/>161</a></li><li class=page-item><a class=page-link href=/page/162/>162</a></li><li class="page-item disabled"><span aria-hidden=true>&nbsp;&mldr;&nbsp;</span></li><li class=page-item><a class=page-link href=/page/230/>230</a></li><li class=page-item><a href=/page/162/ class=page-link aria-label=Next><span aria-hidden=true>&#187;</span></a></li><li class=page-item><a href=/page/230/ class=page-link aria-label=Last><span aria-hidden=true>&#187;&#187;</span></a></li></ul></div></div><script src=http://purplepalmdash.github.io/js/highlight.pack.js></script><script>hljs.initHighlightingOnLoad();</script></body></html>