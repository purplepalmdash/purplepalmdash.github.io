<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en lang=en-us><head><meta name=generator content="Hugo 0.64.0"><link href=http://gmpg.org/xfn/11 rel=profile><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><title>Dash &#183; Dash</title><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css><link rel=stylesheet href="https://purplepalmdash.github.io/css/poole.css?ref=abc124"><link rel=stylesheet href="https://purplepalmdash.github.io/css/hyde.css?ref=abc124"><link rel=stylesheet href="https://purplepalmdash.github.io/css/poole-overrides.css?ref=abc124"><link rel=stylesheet href="https://purplepalmdash.github.io/css/hyde-overrides.css?ref=abc124"><link rel=stylesheet href="https://purplepalmdash.github.io/css/hyde-a.css?ref=abc124"><link rel=stylesheet href="https://purplepalmdash.github.io/css/custom-additions.css?ref=abc124"><link rel=stylesheet href=https://purplepalmdash.github.io/css/highlight/googlecode.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.min.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/styles/docco.min.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/1.10.2/jquery.min.js></script><script type=text/javascript src=/js/html2canvas.js></script><script type=text/javascript>function genPostShot(){var rightNow=new Date();var imageName=rightNow.toISOString().slice(0,16).replace(/(-)|(:)|(T)/g,"");imageName+='.jpg'
html2canvas(document.getElementsByClassName('post'),{background:'#FFFFFF',onrendered:function(canvas){$('#test').attr('href',canvas.toDataURL("image/jpeg"));$('#test').attr('download',imageName);$('#test')[0].click();}});};</script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/highlight.min.js></script><script>hljs.initHighlightingOnLoad();</script><link rel=apple-touch-icon-precomposed sizes=144x144 href="http://purplepalmdash.github.io/touch-icon-144-precomposed.png?ref=abc124"><link href="http://purplepalmdash.github.io/favicon.png?ref=abc124" rel=icon><link href=%7balternate%20%7bRSS%20application/rss+xml%20%20index%20alternate%20%20false%20false%20true%20false%20false%200%7d%20/index.xml%20http://purplepalmdash.github.io/index.xml%7d rel=alternate type=application/rss+xml title="Dash &#183; Dash"><meta name=description content><meta name=keywords content="unix,virtualization,embedded,linux"></head><body class=theme-base-0c><div class=sidebar><div class="container sidebar-sticky"><div class=sidebar-about><img src=http://purplepalmdash.github.io/images/mylogo.jpeg alt=gravatar><h1><a href=http://purplepalmdash.github.io/>很惭愧，就做了一点微小的工作</a></h1><a href=http://purplepalmdash.github.io/><p>Dash</p></a></div><ul class=sidebar-nav><li class=sidebar-nav-item><a href=http://purplepalmdash.github.io/post/>All Posts</a></li><li class=sidebar-nav-item><a href=http://purplepalmdash.github.io/categories/technology/>Technology</a></li><li class=sidebar-nav-item><a href=http://purplepalmdash.github.io/categories/life/>Life</a></li><li class=sidebar-nav-item><a href=http://purplepalmdash.github.io/categories/linuxtips/>LinuxTips</a></li></ul><ul class=sidebar-nav><li class=sidebar-nav-item><a href=https://github.com/purplepalmdash><i class="fa fa-github-square fa-3x"></i></a><a href=https://cn.linkedin.com/in/yang-feipeng-1b909319><i class="fa fa-linkedin-square fa-3x"></i></a><a href=https://plus.google.com/u/0/106572959364703833986><i class="fa fa-google-plus-square fa-3x"></i></a><a href=https://www.facebook.com/yang.feipeng><i class="fa fa-facebook-square fa-3x"></i></a><a href=https://twitter.com/dashwillfly><i class="fa fa-twitter-square fa-3x"></i></a></li></ul></div></div><div class="content container"><div class=posts><div class=post><h1 class=post-title><a href=http://purplepalmdash.github.io/2015/12/03/customize-surfacepro-kernel/>Customize SurfacePro Kernel</a></h1><span class=post-date>Dec 3, 2015<br><a class=a_cat href=http://purplepalmdash.github.io/categories/technology>Technology</a></span><h3 id=preparation>Preparation</h3><p>Get the kernel and patch file:</p><pre><code>To be Written
</code></pre><h3 id=build>Build</h3><p>Prepare for compiliation:</p><pre><code>$ make mrproper
</code></pre><p>Get the current running configuration:</p><pre><code>$ zcat /proc/config.gz &gt; .config
$ make menuconfig
$ make -j3
$ make modules_install
</code></pre><p>Install Kernel, you newly generated kernel will be named as
<code>vmlinuz-4.1.13-surfacepro3</code>(Though surfacepro, surfacepro3 will remains its name) :</p><pre><code>$ sudo cp -v arch/x86/boot/bzImage /boot/vmlinuz-4.1.13-surfacepro3
</code></pre><p>Generate the initial RAM disk:</p><pre><code>$ sudo mkinitcpio -k 4.1.13-surfacepro3 -c /etc/mkinitcpio.conf -g  \ 
/boot/initramfs-4.1.13-surfacepro3.img
</code></pre><p>Copy System.map, it contains a list of kernel symbols.</p><pre><code>$ sudo cp System.map /boot/System.map-4.1.13-surfacepro3
$ sudo ln -sf /boot/System.map-4.1.13-surfacepro3 /boot/System.map
</code></pre><p>Install the grub&rsquo;s configuration into grub.cfg:</p><pre><code>$ sudo vim /etc/default/grub
Edit with the name specified
$ sudo grub-mkconfig -o /boot/grub/grub.cfg
</code></pre><p>But still this modification didn&rsquo;t solve surfacepro&rsquo;s wireless problem. finally I have
to fall back to using yaourt&rsquo;s surfac pro kernel.</p></div><div class=post><h1 class=post-title><a href=http://purplepalmdash.github.io/2015/11/25/awesomes-battery-indicator/>Awesome's Battery Indicator</a></h1><span class=post-date>Nov 25, 2015<br><a class=a_cat href=http://purplepalmdash.github.io/categories/technology>Technology</a></span><h3 id=background>Background</h3><p>I installed ArchLinux+Awesome On my SurfacePro, while the charger of Surface Pro is not
so tight to the pad. Thus I have to use a battery indicator in Awesome.</p><h3 id=software>Software</h3><p>Refers to:</p><p><a href=http://www.everythingisvoid.com/uncategorized/simple-battery-status-indicator-awesome-window-manager>http://www.everythingisvoid.com/uncategorized/simple-battery-status-indicator-awesome-window-manager</a></p><p>Install steps on ArchLinux:</p><pre><code>$ sudo pacman -S luarocks5.1 gobject-introspection acpi
$ sudo luarocks-5.1 install battery_status
</code></pre><p>You could manually run <code>show_battery_status</code> or add it into your own rc.lua file:</p><pre><code>$ vim ~/.config/awesome/rc.lua
----.....................
autorunApps =
{
--.........
&quot;synergyc 192.168.0.119&quot;,
&quot;sudo echo 1240&gt;/sys/class/backlight/intel_backlight/brightness&quot;, 
&quot;fcitx&quot;,
&quot;show_battery_status&quot;, 
----.....................
</code></pre><p>Now restart the awesome you could see the battery indicator.</p><h3 id=add-charging-indicator>Add Charging Indicator</h3><p>First download the source code from github:</p><pre><code>$ git clone https://github.com/svarogg/battery_status
</code></pre><p>Debug with luarocks loader:</p><pre><code>rocks-5.1   lua5.1 -lluarocks.loader
Lua 5.1.5  Copyright (C) 1994-2012 Lua.org, PUC-Rio
&gt; require(&quot;rex_posix&quot;)
&gt; rex = require(&quot;rex_posix&quot;)
&gt; battery_rex = rex.new([[([^,]{1,3})%]])
&gt; rex=require(&quot;rex_posix&quot;)
&gt; battery_rex=rex.new([[([^,]{1,3})%]])
&gt; acpi=io.popen('acpi 2&gt;&amp;1')
&gt; acpi_res = acpi:read(&quot;*line&quot;)
&gt; acpi:close()
&gt; print (acpi_res)
Battery 0: Full, 100%
&gt; percentage=battery_rex:match(acpi_res)
&gt; print (percentage)
100
&gt; print(type(percentage))
string
&gt; print(type(tonumber(percentage)))
number
&gt; adapter = io.popen('acpi -a 2&gt;&amp;1')
&gt; adapter_res = adapter:read(&quot;*line&quot;)
&gt; adapter:close()
&gt; print(adapter_res)
Adapter 0: on-line
&gt; charge_rex = rex.new([[(on|off)]])
&gt; print(charge_rex:match(adapter_res))
on
</code></pre><p>We get the status of the charge, then update the corresponding icon to the systray.</p><p>The modified repository could be fetched from:</p><p><a href=https://github.com/purplepalmdash/Awesome-Battery-Indicator>https://github.com/purplepalmdash/Awesome-Battery-Indicator</a></p></div><div class=post><h1 class=post-title><a href=http://purplepalmdash.github.io/2015/11/18/tips-on-archlinux-on-ssd-for-surfacepro/>Tips On ArchLinux On SSD For SurfacePro</a></h1><span class=post-date>Nov 18, 2015<br><a class=a_cat href=http://purplepalmdash.github.io/categories/technology>Technology</a></span><h3 id=hardware>Hardware</h3><p>Surface Pro, KingShare 128G SSD(USB).</p><p>Picture will be updated after successfully installed.</p><h3 id=virtualbox-way>Virtualbox Way</h3><p>Make a vmdk file which actually points to the USB Disk:</p><pre><code>$ sudo VBoxManage internalcommands createrawvmdk -filename ./rawusb1.vmdk -rawdisk \ 
/dev/disk/by-id/usb-KINGSHAR_KS-CUTS25W_123456789010-0:0
$ sudo chown -R YourName rawusb1.vmdk
</code></pre><p>Now using this rawdisk for starting the VirtualBox based machine.</p><p><img src=/images/2015_11_18_17_10_46_645x529.jpg alt=/images/2015_11_18_17_10_46_645x529.jpg></p><h3 id=installation>Installation</h3><p>The system installation is refers to following links:</p><p><a href=https://wiki.archlinux.org/index.php/Microsoft_Surface_Pro_3>https://wiki.archlinux.org/index.php/Microsoft_Surface_Pro_3</a></p><p><a href=https://wiki.archlinux.org/index.php/Installing_Arch_Linux_on_a_USB_key>https://wiki.archlinux.org/index.php/Installing_Arch_Linux_on_a_USB_key</a></p><h3 id=updated-configuration>Updated Configuration</h3><p>Finally I installed the surface pro by using a usb dongle which burned the archlinux
installation iso, put it into the surface pro and startup the machine pressing power
key and volume down key, it will goes into the installtion steps.</p><p>Install the system on the SSD, the main steps are available at:</p><p><a href=http://purplepalmdash.github.io/blog/2014/06/16/archlinux-on-surface-pro/>http://purplepalmdash.github.io/blog/2014/06/16/archlinux-on-surface-pro/</a></p><pre><code>root@archiso ~ # mount /dev/sdb2 /mnt
root@archiso ~ # mount /dev/sdb1 /mnt/boot/EFI 
root@archiso ~ # arch-chroot /mnt /bin/bash
[root@archiso /]# grub-install --target=x86_64-efi --efi-directory=/boot/EFI \ 
--bootloader-id=arch_grub --recheck
[root@archiso /]# grub-mkconfig -o /boot/grub/grub.cfg
</code></pre><p>Because I frequently change the installtion media(I have SSD and Harddisk), so
everytime I change the installtion media, I have to run above steps again.</p><h3 id=kernel-configuration>Kernel Configuration</h3><p>Install the kernel from yaourt, you could get the surfacepro3 compatiable linux kernel,
install it on surface pro will also be OK:</p><pre><code>$ yaourt surfacepro
1 aur/linux-surfacepro3 4.3-1 [installed] (5)
    The Linux-surfacepro3 kernel and modules
2 aur/linux-surfacepro3-docs 4.3-1 (5)
    Kernel hackers manual - HTML documentation that comes with the Linux-surfacepro3
kernel
3 aur/linux-surfacepro3-headers 4.3-1 (5)
    Header files and scripts for building modules for Linux-surfacepro3 kernel
</code></pre><p>After installation, you have to manually generate the grub items:</p><pre><code>$ sudo grub-mkconfig -o /boot/grub/grub.cfg
</code></pre><p>Now reboot the surface pro, you could view the kernel has been upgraded to our newly
installed version:</p><pre><code>➜  ~  uname -a
Linux surfacepro 4.3.0-1-surfacepro3 #1 SMP PREEMPT Fri Nov 20 05:47:41 CST 2015 x86_64
GNU/Linux
</code></pre><p>With the new version of kernel, you won&rsquo;t face too much problems, my problem is when
using the official kernel, my wifi will get stucked, sometimes the machine will be
dead.</p></div><div class=post><h1 class=post-title><a href=http://purplepalmdash.github.io/2015/11/16/spice-client/>Spice Client</a></h1><span class=post-date>Nov 16, 2015<br><a class=a_cat href=http://purplepalmdash.github.io/categories/technology>Technology</a></span><h3 id=image-conversion>Image Conversion</h3><p>Convert the vdi files into qcow2 file:</p><pre><code>$ qemu-img convert -f vdi -O qcow2 Windows81.vdi Windows81.qcow2
</code></pre><p>Then continue to create the virtual machine via importing the img.</p><h3 id=spice-client>Spice Client</h3><p>Using virtviewer for view the remote machine.</p><pre><code>$ sudo pacman -S virt-viewer
$ remote-viewer spice://localhost:5900
</code></pre><p>Or you could view the desktop via <code>spicec</code>.</p><p>The listening port could be view via <code>netstat -anp | grep 5900</code>.</p></div><div class=post><h1 class=post-title><a href=http://purplepalmdash.github.io/2015/11/13/win10-tips-for-using-xshell/>Win10 Tips For Using Xshell</a></h1><span class=post-date>Nov 13, 2015<br><a class=a_cat href=http://purplepalmdash.github.io/categories/technology>Technology</a></span><p>Won&rsquo;t change the size of the window when you disable the window size:</p><p><img src=/images/Xshell_1.jpg alt=/images/Xshell_1.jpg></p><p>When using vim, the wrappered module should be disable, thus won&rsquo;t cause you
mis-editing the content of the file:</p><p><img src=/images/Xshell_2.jpg alt=/images/Xshell_2.jpg></p><p>The configuration should be applied to each session.</p></div><ul class=pagination><li class=page-item><a href=/ class=page-link aria-label=First><span aria-hidden=true>&#171;&#171;</span></a></li><li class=page-item><a href=/page/129/ class=page-link aria-label=Previous><span aria-hidden=true>&#171;</span></a></li><li class=page-item><a class=page-link href=/>1</a></li><li class=page-item><a class=page-link href=/page/2/>2</a></li><li class=page-item><a class=page-link href=/page/3/>3</a></li><li class="page-item disabled"><span aria-hidden=true>&nbsp;&mldr;&nbsp;</span></li><li class=page-item><a class=page-link href=/page/129/>129</a></li><li class="page-item active"><a class=page-link href=/page/130/>130</a></li><li class=page-item><a class=page-link href=/page/131/>131</a></li><li class="page-item disabled"><span aria-hidden=true>&nbsp;&mldr;&nbsp;</span></li><li class=page-item><a class=page-link href=/page/240/>240</a></li><li class=page-item><a href=/page/131/ class=page-link aria-label=Next><span aria-hidden=true>&#187;</span></a></li><li class=page-item><a href=/page/240/ class=page-link aria-label=Last><span aria-hidden=true>&#187;&#187;</span></a></li></ul></div></div><script src=http://purplepalmdash.github.io/js/highlight.pack.js></script><script>hljs.initHighlightingOnLoad();</script></body></html>