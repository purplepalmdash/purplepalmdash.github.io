<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en lang=en-us><head><meta name=generator content="Hugo 0.64.0"><link href=http://gmpg.org/xfn/11 rel=profile><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><title>Dash &#183; Dash</title><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css><link rel=stylesheet href="https://purplepalmdash.github.io/css/poole.css?ref=abc124"><link rel=stylesheet href="https://purplepalmdash.github.io/css/hyde.css?ref=abc124"><link rel=stylesheet href="https://purplepalmdash.github.io/css/poole-overrides.css?ref=abc124"><link rel=stylesheet href="https://purplepalmdash.github.io/css/hyde-overrides.css?ref=abc124"><link rel=stylesheet href="https://purplepalmdash.github.io/css/hyde-a.css?ref=abc124"><link rel=stylesheet href="https://purplepalmdash.github.io/css/custom-additions.css?ref=abc124"><link rel=stylesheet href=https://purplepalmdash.github.io/css/highlight/googlecode.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.min.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/styles/docco.min.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/1.10.2/jquery.min.js></script><script type=text/javascript src=/js/html2canvas.js></script><script type=text/javascript>function genPostShot(){var rightNow=new Date();var imageName=rightNow.toISOString().slice(0,16).replace(/(-)|(:)|(T)/g,"");imageName+='.jpg'
html2canvas(document.getElementsByClassName('post'),{background:'#FFFFFF',onrendered:function(canvas){$('#test').attr('href',canvas.toDataURL("image/jpeg"));$('#test').attr('download',imageName);$('#test')[0].click();}});};</script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/highlight.min.js></script><script>hljs.initHighlightingOnLoad();</script><link rel=apple-touch-icon-precomposed sizes=144x144 href="http://purplepalmdash.github.io/touch-icon-144-precomposed.png?ref=abc124"><link href="http://purplepalmdash.github.io/favicon.png?ref=abc124" rel=icon><link href=%7balternate%20%7bRSS%20application/rss+xml%20%20index%20alternate%20%20false%20false%20true%20false%20false%200%7d%20/index.xml%20http://purplepalmdash.github.io/index.xml%7d rel=alternate type=application/rss+xml title="Dash &#183; Dash"><meta name=description content><meta name=keywords content="unix,virtualization,embedded,linux"></head><body class=theme-base-0c><div class=sidebar><div class="container sidebar-sticky"><div class=sidebar-about><img src=http://purplepalmdash.github.io/images/mylogo.jpeg alt=gravatar><h1><a href=http://purplepalmdash.github.io/>很惭愧，就做了一点微小的工作</a></h1><a href=http://purplepalmdash.github.io/><p>Dash</p></a></div><ul class=sidebar-nav><li class=sidebar-nav-item><a href=http://purplepalmdash.github.io/post/>All Posts</a></li><li class=sidebar-nav-item><a href=http://purplepalmdash.github.io/categories/technology/>Technology</a></li><li class=sidebar-nav-item><a href=http://purplepalmdash.github.io/categories/life/>Life</a></li><li class=sidebar-nav-item><a href=http://purplepalmdash.github.io/categories/linuxtips/>LinuxTips</a></li></ul><ul class=sidebar-nav><li class=sidebar-nav-item><a href=https://github.com/purplepalmdash><i class="fa fa-github-square fa-3x"></i></a><a href=https://cn.linkedin.com/in/yang-feipeng-1b909319><i class="fa fa-linkedin-square fa-3x"></i></a><a href=https://plus.google.com/u/0/106572959364703833986><i class="fa fa-google-plus-square fa-3x"></i></a><a href=https://www.facebook.com/yang.feipeng><i class="fa fa-facebook-square fa-3x"></i></a><a href=https://twitter.com/dashwillfly><i class="fa fa-twitter-square fa-3x"></i></a></li></ul></div></div><div class="content container"><div class=posts><div class=post><h1 class=post-title><a href=http://purplepalmdash.github.io/2014/05/24/moving-from-working-pc-to-own-usb-disk-based-5/>Moving From Working PC to Own USB-Disk Based 5</a></h1><span class=post-date>May 24, 2014<br><a class=a_cat href=http://purplepalmdash.github.io/categories/technology>Technology</a></span><h3 id=font-customization>Font Customization</h3><p>Install following fonts:</p><pre><code>$ sudo pacman -S wqy-bitmapfont  wqy-zenhei ttf-arphic-ukai ttf-arphic-uming ttf-fireflysung

</code></pre><p>And then for more beautiful font, refer to:<br><a href=http://kkkttt.github.io/blog/2013/12/25/archlinuxzhong-wen-hua-wen-ti/>http://kkkttt.github.io/blog/2013/12/25/archlinuxzhong-wen-hua-wen-ti/</a></p><h3 id=vim-customization>VIM Customization</h3><p>Vim is my favorite editor, so maintain a configuration file is necessary for deploying it on various machines.</p><pre><code>$ sudo pacman -S ctags

</code></pre><p>Then copy the default vimrc file from /usr/share/vim74/vimrc_example to your own directory, named it into .vimrc.
Add folllowing lines into .vimrc file:</p><pre><code>&quot; Customization Start
set nu
set cursorline 
set cursorcolumn
&quot;Enable syntax
syntax enable
syntax on
&quot; colorscheme solarized
autocmd BufNewFile,BufReadPost *.ino,*.pde set filetype=cpp
&quot;进行Tlist的设置
&quot;&quot;TlistUpdate可以更新tags
map &lt;F3&gt; :silent! Tlist&lt;CR&gt; 
&quot;按下F3就可以呼出了
let Tlist_Ctags_Cmd='ctags' &quot;因为我们放在环境变量里，所以可以直接执行
let Tlist_Use_Right_Window=1 &quot;让窗口显示在右边，0的话就是显示在左边
let Tlist_Show_One_File=0 &quot;让taglist可以同时展示多个文件的函数列表，如果想只有1个，设置为1
let Tlist_File_Fold_Auto_Close=1 &quot;非当前文件，函数列表折叠隐藏
let Tlist_Exit_OnlyWindow=1 &quot;当taglist是最后一个分割窗口时，自动推出vim
let Tlist_Process_File_Always=0 &quot;是否一直处理tags.1:处理;0:不处理。不是一直实时更新tags，因为没有必要
let Tlist_Inc_Winwidth=0
set fileencodings=utf8,cp936,gb18030,big5
&quot;In visual mode, you can simply press ,x and Vim will filter your content
&quot;through tidy.
:vmap ,x :%!tidy -q -i --show-errors 0&lt;CR&gt; &quot;Auto command for clear the html files
:command Thtml :%!tidy -q -i --show-errors 0
:command Txml  :%!tidy -q -i --show-errors 0 -xml


&quot; Setting up Vundle - the vim plugin bundler
    let iCanHazVundle=1
    let vundle_readme=expand('~/.vim/bundle/vundle/README.md')
    if !filereadable(vundle_readme)
        echo &quot;Installing Vundle..&quot;
        echo &quot;&quot;
        silent !mkdir -p ~/.vim/bundle
        silent !git clone https://github.com/gmarik/vundle ~/.vim/bundle/vundle
        let iCanHazVundle=0
    endif
    set rtp+=~/.vim/bundle/vundle/
    call vundle#rc()
    Bundle 'gmarik/vundle'
    Bundle 'tpope/vim-fugitive'
    Bundle 'taglist.vim'
    &quot; Bundle 'molokai'
    &quot;Add your bundles here
    &quot;Bundle 'Syntastic' &quot;uber awesome syntax and errors highlighter
    Bundle 'altercation/vim-colors-solarized' 
    Bundle 'https://github.com/tomasr/molokai.git'
    &quot;T-H-E colorscheme
    &quot;Bundle 'https://github.com/tpope/vim-fugitive' &quot;So awesome, it should be illegal 
    &quot;...All your other bundles...
    if iCanHazVundle == 0
        echo &quot;Installing Bundles, please ignore key map error messages&quot;
        echo &quot;&quot;
        :BundleInstall
    endif
&quot; Setting up Vundle - the vim plugin bundler end

colorscheme molokai
set guifont=YaHei\ Consolas\ Hybrid\ 11.5

</code></pre><p>Then everything I want is OK.<br>Command for configurating vbundle:</p><pre><code>BundleInstall
BundleSearch

</code></pre><p>Tree tool has been installed, for view the complex directory structure :</p><pre><code>$ sudo pacman -S tree

</code></pre><h3 id=arduino-related>Arduino Related</h3><p>Install arduino from yaourt.</p><pre><code>$ yaourt -S arduino

</code></pre><p>This will also install avr-gcc.</p><h3 id=nodejs>NodeJS</h3><p>Install via yaourt:</p><pre><code>$ yaourt -S nodejs

</code></pre><p>Basic Tutorial:<br><a href=http://localhost2/blog/2014/05/14/node-dot-js-quick-start/>http://localhost2/blog/2014/05/14/node-dot-js-quick-start/</a><br>Later I will add the &ldquo;Chat-like&rdquo; Terminal-emulator series, so this part could be enhanced.</p><h3 id=editor-tools>Editor tools</h3><p>Tools which used for writing articles.</p><pre><code>$ sudo pacman -S blender dia inkscape scribus
$ yaourt yed
$ yaourt sublime
$ sudo pacman -S gedit
$ sudo pacman -S imagemagick

</code></pre><h3 id=awesome-configuration>Awesome Configuration</h3><p>Dmenu which used for run applications:</p><pre><code>$ sudo pacman -S dmenu

</code></pre><p>Screen shot:</p><pre><code>$ sudo pacman -S scrot

</code></pre><p>Edit the /usr/bin/mycapscr</p><pre><code>[Trusty@~]$ cat /usr/bin/mycapscr 
 scrot -s '%Y_%m_%d_%H_%M_%S_$wx$h.jpg' -e 'mv $f ~/capscr/'

</code></pre><h3 id=other-tools>Other Tools</h3><p>Tcpdump for capturing packets.</p><pre><code>$ sudo pacman -S tcpdump

</code></pre><p>Whatpulse for recording key click times:</p><pre><code>$ sudo yaourt -S whatpulse
$ sudo gpasswd -a Trusty input

</code></pre><p>Remote Desktop:</p><pre><code>$ pacman -S rdesktop

</code></pre><p>Conky and Conky configuration file.</p><pre><code>$ pacman -S conky

</code></pre><p>hex tool:</p><pre><code>$ pacman -S ghex

</code></pre><p>Calculator:</p><pre><code>$ pacman -S bc
$ pacman -S gnome-calculator

</code></pre><p>Nautlus:</p><pre><code>$ pacman -S nautilus

</code></pre><p>rar:</p><pre><code>$ pacman -S rar

</code></pre><p>autossh:</p><pre><code>$ pacman -S autossh

</code></pre><p>cmake:</p><pre><code>$ pacman -S cmake

</code></pre><p>cronie:</p><pre><code>$ pacman -S connie

</code></pre><p>elinks:</p><pre><code>$ pacman -S elinks

</code></pre><p>eog:</p><pre><code>$ pacman -S eog

</code></pre><p>ethtool</p><pre><code>$ pacman -S ethtool

</code></pre><p>expect:</p><pre><code>$ pacman -S expect

</code></pre><p>feh:</p><pre><code>$ pacman -S feh

</code></pre><p>gparted:</p><pre><code>$ pacman -S gparted

</code></pre><p>ipython2:</p><pre><code>$ pacman -S ipython2

</code></pre><p>ntfs-3g:</p><pre><code>$ pacman -S ntfs-3g

</code></pre><p>sakura lilyterm:</p><pre><code>$ pacman -S sakura lilyterm

</code></pre><p>tmux:</p><pre><code>$ pacman -S tmux

</code></pre><p>w3m,lynx:</p><pre><code>$ pacman -S w3m lynx

</code></pre><p>xclip:</p><pre><code>$ pacman -S xclip

</code></pre><p>xlockmore:</p><pre><code>$ pacman -S xlockmore

</code></pre><h3 id=e-book-tools>E-Book Tools</h3><p>XPdf:</p><pre><code>$ pacman -S xpdf

</code></pre><p>calibre:</p><pre><code>$ pacman -S calibre

</code></pre><p>Rstudio:</p><pre><code>$ yaourt rstudio-desktop-bin

</code></pre><p>pandoc(Problem!):</p><pre><code>$ yaourt pandoc
# Notice, you have to add curl -k in /etc/makepkg.conf

</code></pre><p>briss(For cutting pdf into 6 inch):</p><pre><code>$ yaourt briss

</code></pre><p>coolreader(For reading epub):</p><pre><code>$ yaourt -S coolreader

</code></pre></div><div class=post><h1 class=post-title><a href=http://purplepalmdash.github.io/2014/05/23/moving-from-working-pc-to-own-usb-disk-based-4/>Moving From Working PC to Own USB-Disk Based 4</a></h1><span class=post-date>May 23, 2014<br><a class=a_cat href=http://purplepalmdash.github.io/categories/technology>Technology</a></span><h3 id=writing-blog>Writing Blog</h3><p>I use octopress for writing blog, so this time in USB system I also want to enable it.<br>Edit the <code>/etc/hostname</code> and name my computer into &ldquo;USBArch&rdquo;, because we want to setup the id_rsa.pub in next step.</p><pre><code>$ ssh-keygen
$ cat ~/.ssh/id_rsa.pub

</code></pre><p>Copy the content and add it into the <a href=%22https://github.com/settings/ssh%22>&ldquo;https://github.com/settings/ssh&rdquo;</a>,
Then use command <code>ssh -T git@github.com</code> to verify if you can successfully be authenticated.</p><pre><code>$ git clone git@github.com:kkkttt/debian_octopress.git
$ git clone git@github.com:kkkttt/herokublog.git

</code></pre><p>Now the repository is OK, but the ruby environment should be set.</p><pre><code>$ curl -L https://get.rvm.io | bash -s stable
$ rvm use 1.9.3
# log out the terminal and log in again
$ rvm rubygems latest
$ cdheroku
# Choose yes, trust the .rvmrc
$ gem install bundler
$ bundle install

</code></pre><p>Test the rake command:</p><pre><code>$ rake generate &amp;&amp; rake deploy

</code></pre><p>OK, Then we can octopress for writing blogs.</p><h3 id=webserver>WebServer</h3><p>We will use xampp for webserver, because it&rsquo;s very convinient to configure. Login as root, then:</p><pre><code># yaourt xampp

</code></pre><p>The detailed configuration steps could be viewed at:<br><a href=http://kkkttt.github.io/blog/2014/04/23/deploy-xampp-on-archlinux/>http://kkkttt.github.io/blog/2014/04/23/deploy-xampp-on-archlinux/</a></p><p>In fact here I met a very strange problem, it seems if I put the whole blog under <code>/home/Trusty/code</code>, then the browser will complains that 403, so here I make a trick in rakefile(Which is used for generating the static website), add following line in <code>rake generate</code></p><pre><code>desc &quot;Generate jekyll site&quot;
task :generate do
  raise &quot;### You haven't set anything up yet. First run `rake install` to set up an Octopress theme.&quot; unless File.directory?(source_dir)
  puts &quot;## Generating Site with Jekyll&quot;
  system &quot;compass compile --css-dir #{source_dir}/stylesheets&quot;
  system &quot;jekyll&quot;
  system &quot;sudo cp -ar ./public/ /opt/ &amp;&amp; sudo chown -R nobody /opt/public/ &amp;&amp; sudo chgrp -R nobody /opt/public/ &amp;&amp; sudo chmod 755 -R /opt/public/&quot;
end

</code></pre><p>I don&rsquo;t find another method, because xampp is too complex for configuring, we needn&rsquo;t spend much more time on it.</p><p>Tomorrow I will setup the other language development environment.</p></div><div class=post><h1 class=post-title><a href=http://purplepalmdash.github.io/2014/05/22/moving-from-working-pc-to-own-usb-disk-based-3/>Moving From Working PC to Own USB-Disk Based 3</a></h1><span class=post-date>May 22, 2014<br><a class=a_cat href=http://purplepalmdash.github.io/categories/technology>Technology</a></span><h3 id=trouble-shooting>Trouble Shooting</h3><p>Unfortuately the qemu based pysical disk can&rsquo;t bootup the machine correctly, so I re-intall the sytem on USB-Disk from the scratch. This time the problem appears as another: It can startup the machine, but failed to boot-up in qemu.<br>So I have to changed to use VirtualBox for booting the system.<br>Get the disk id via:</p><pre><code>$ ls -l /dev/disk/by-id
lrwxrwxrwx 1 root root  9 May 22 14:45 usb-ATA_ST980811AS_xxxxxxxx-0:0 -&gt; ../../sdb

</code></pre><p>Then use VirtualBox&rsquo;s Internal command for creating the vmdk file, this vmdk file actually contains the physical disk.</p><pre><code>$ VBoxManage internalcommands createrawvmdk -filename ./rawusb1.vmdk -rawdisk /dev/disk/by-id/usb-ATA_ST980811AS_XXXXXXXXXXX-0:0
RAW host disk access VMDK file ./rawusb1.vmdk created successfully.
$ sudo chown -R Trusty *

</code></pre><p>Now create a new virtual machine in virtualbox, use the newly created rawusb1.vmdk, bootup and you got the physical disk based virtual machine running.</p><h3 id=continue-install-system>Continue Install System</h3><h4 id=python-related-environment>Python related environment</h4><p>Install virtualenvironment via:</p><pre><code>sudo pacman -S python2-virtualenv python-virtualenv python-virtualenvwrapper

</code></pre><p>In company machine, use pip freeze for getting all of the packages:</p><pre><code>$ workon venv2
$ pip freeze&gt;requirement.txt

</code></pre><p>In usb-disk based machine, install from the requirement.txt</p><pre><code>$ mkdir .virtualenvs
# Add following lines into the .bashrc
export WORKON_HOME=~/.virtualenvs
source /usr/bin/virtualenvwrapper.sh
$ mkvirtualenv -p /usr/bin/python2.7 venv
$ pip install -r requirements.txt

</code></pre><p>After we update the installation, the package is the same as in computer machine.</p><h4 id=zsh>ZSH</h4><p>Install zsh and use it for replacing default bash:</p><pre><code>$ sudo pacman -S zsh
$ chsh -s $(which zsh)

</code></pre><p>Now we can download the .zshrc from the company machine to usb disk based system.</p><h4 id=configure-git-under-proxy>Configure GIT Under Proxy</h4><p>Setting the proxy and set it for git using proxy:</p><pre><code>(venv)[Trusty@localhost ~]$ gcc -o connect connect.c 
(venv)[Trusty@localhost ~]$ sudo mv connect /usr/bin/
(venv)[Trusty@localhost ~]$ sudo chmod 777 /usr/bin/connect 
(venv)[Trusty@localhost ~]$ sudo vim /usr/bin/myproxy
(venv)[Trusty@localhost ~]$ sudo chmod 777 /usr/bin/myproxy
(venv)[Trusty@localhost ~]$ cat /usr/bin/myproxy 
/usr/bin/connect -H 1xx.xxx.xxx.xxx:2xxxx $@
(venv)[Trusty@localhost ~]$ git config --global core.gitproxy &quot;/usr/bin/myproxy for *.*&quot;
(venv)[Trusty@localhost ~]$ git config --global user.name &quot;feixxxx&quot;
(venv)[Trusty@localhost ~]$ git config --global user.email &quot;feixxxx@gmail.com&quot;

</code></pre><h4 id=bluetooth>BlueTooth</h4><p>Install blueman:</p><pre><code>$ sudo pacman -S patch automake autoconf libtool 
$ yaourt blueman
# choose blueman-bzr
$ sudo pacman -S bluez-utils bluez-libs python2-pybluez
$ yaourt -S bluez4
$ yaourt pulseaudio-bluez4

</code></pre><p>Configure bluetooth:</p><pre><code>$ sudo systemctl start bluetooth
$ sudo systemctl enable bluetooth
$ cat /etc/bluetooth/audio.conf

[General]
Enable=Socket

[A2DP]
SBCSources=1
$ 

</code></pre><p>Later bluemanager will be added into the awesome startup application.<br>The configuration is pretty complex, this is the start-point for settingup the bluetooth, later we will configure the bluetooth headset.</p><h4 id=tray-items>Tray items</h4><pre><code>$ sudo pacman -S udiskie wicd wicd-gtk

</code></pre><h4 id=awesome-customization>Awesome Customization</h4><p>Download the themes from github:</p><pre><code>$ sudo pacman -S hddtemp vicious
$ git clone https://github.com/Morley93/awesome-themes-3.5.git

</code></pre><p>Still have some problems. Need update.<br>Then get the customized awesome configuration file. Be sure to use the default, because later you can customize yourself.</p><p>Solve wicd error:<br>Error: Could not connect to wicd&rsquo;s D-Bus interface</p><pre><code>$ sudo pacman -R wicd wicd-gtk
$ sudo rm -rf /etc/wicd /var/log/wicd /etc/dbus-1/system.d/wicd*
$ sudo pacman -S wicd wicd-gtk
$ sudo pacman -Syu systemd-sysvcompat
$ sudo gpasswd -a Trusty users
$ sudo systemctl enable wicd
$ sudo systemctl start wicd

</code></pre><p>Now your wicd is OK for see.</p><p>udiskie2 problem, cannot start because lack of PyYAML:</p><pre><code>$ sudo pacman -S python2-pip
$ sudo pip2 install PyYAML

</code></pre><p>Now seems all of your tray icons will be OK.</p><h4 id=system-tools>System Tools</h4><p>Install the mlocate so we can use updatedb:</p><pre><code>$ sudo pacman -S mlocate
$ sudo updatedb

</code></pre></div><div class=post><h1 class=post-title><a href=http://purplepalmdash.github.io/2014/05/21/moving-from-working-pc-to-own-usb-disk-based/>Moving From Working PC To Own USB-Disk Based</a></h1><span class=post-date>May 21, 2014<br><a class=a_cat href=http://purplepalmdash.github.io/categories/technology>Technology</a></span><h3 id=background>Background</h3><p>Since I want to hava a usb-based OS which could easily be taken by hand, I took this series for resarching how to finish this aim.</p><h3 id=preparation>Preparation</h3><p>ArchLinux iso file, USB-3.0 HardDisk, 80GB, later I will use a bigger one.</p><h4 id=qemu-script>Qemu Script</h4><p>I use qemu firstly to install the system. following is the configuraton file for qemu-i386:</p><pre><code>#!/bin/bash
USERID=$(whoami)

# Get name of newly created TAP device; see https://bbs.archlinux.org/viewtopic.php?pid=1285079#p1285079
precreationg=$(/usr/bin/ip tuntap list | /usr/bin/cut -d: -f1 | /usr/bin/sort)
sudo /usr/bin/ip tuntap add user $USERID mode tap
postcreation=$(/usr/bin/ip tuntap list | /usr/bin/cut -d: -f1 | /usr/bin/sort)
IFACE=$(comm -13 &lt;(echo &quot;$precreationg&quot;) &lt;(echo &quot;$postcreation&quot;))

# This line creates a random MAC address. The downside is the DHCP server will assign a different IP address each time
printf -v macaddr &quot;52:54:%02x:%02x:%02x:%02x&quot; $(( $RANDOM &amp; 0xff)) $(( $RANDOM &amp; 0xff )) $(( $RANDOM &amp; 0xff)) $(( $RANDOM &amp; 0xff ))
# Instead, uncomment and edit this line to set a static MAC address. The benefit is that the DHCP server will assign the same IP address.
# macaddr='52:54:be:36:42:a9'
  
qemu-system-i386 -net nic,macaddr=$macaddr -net tap,ifname=&quot;$IFACE&quot; $*
  
sudo ip link set dev $IFACE down &amp;&gt; /dev/null
sudo ip tuntap del $IFACE mode tap &amp;&gt; /dev/null 

</code></pre><p>Run the virtual machine like following:</p><pre><code>$ ./run-qemu-i386 -hda /dev/sdc -m 1024 -boot d -cdrom  ./archlinux-2014.05.01

</code></pre><h4 id=installation-of-archlinux>Installation Of ArchLinux</h4><p>When your iso bootup, you will enter command-line, use following command for start the ssh :</p><pre><code># passwd root
# systemctl start sshd
# ifconfig 
# ssh root@10.0.0.240

</code></pre><p>Partition disk:</p><pre><code># fdisk /dev/sda
Command (m for help): p
Disk /dev/sda: 74.5 GiB, 80026361856 bytes, 156301488 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: dos
Disk identifier: 0xc001c001

Device    Boot Start       End   Blocks  Id System
/dev/sda1       2048 156301487 78149720  83 Linux

Command (m for help): d

Selected partition 1
Partition 1 has been deleted.

Command (m for help): n

Partition type:
   p   primary (0 primary, 0 extended, 4 free)
   e   extended
Select (default p): p
Partition number (1-4, default 1): 1
First sector (2048-156301487, default 2048): 
Last sector, +sectors or +size{K,M,G,T,P} (2048-156301487, default 156301487): +1G

Created a new partition 1 of type 'Linux' and of size 1 GiB.

Command (m for help): t
Hex code (type L to list all codes): 82
Changed type of partition 'Linux' to 'Linux swap / Solaris'.

Command (m for help): n

Partition type:
   p   primary (1 primary, 0 extended, 3 free)
   e   extended
Select (default p): p
Partition number (2-4, default 2): 
First sector (2099200-156301487, default 2099200): 
Last sector, +sectors or +size{K,M,G,T,P} (2099200-156301487, default 156301487): 

Created a new partition 2 of type 'Linux' and of size 73.5 GiB.

Command (m for help): w
The partition table has been altered.
Calling ioctl() to re-read partition table.
Syncing disks.

root@archiso ~ # fdisk -l /dev/sda

Disk /dev/sda: 74.5 GiB, 80026361856 bytes, 156301488 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: dos
Disk identifier: 0xc001c001

Device    Boot     Start       End   Blocks  Id System
/dev/sda1           2048   2099199  1048576  82 Linux swap / Solaris
/dev/sda2        2099200 156301487 77101144  83 Linux

</code></pre><p>Now your partition is ok, make filesystems.</p><pre><code># mkfs.ext4 /dev/sda2                                                             
root@archiso ~ # mkswap /dev/sda1
root@archiso ~ # swapon /dev/sda1

</code></pre><p>Now begin to install system:</p><pre><code># mount /dev/sda2 /mnt
# pacstrap /mnt base

</code></pre><p>Configuraion:</p><pre><code># genfstab -p /mnt &gt;&gt; /mnt/etc/fstab
# arch-chroot /mnt
sh-4.3# cat /etc/hostname 
FreeArch

sh-4.3# ln -s /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
# Uncomment the items in /etc/locale.gen, and run: 
sh-4.3# locale-gen
Generating locales...
  en_US.UTF-8... done
  en_US.ISO-8859-1... done
  zh_CN.GB18030... done
  zh_CN.GBK... done
  zh_CN.UTF-8... done
  zh_CN.GB2312... done
  zh_TW.EUC-TW... done
  zh_TW.UTF-8... done
  zh_TW.BIG5... done
Generation complete.

sh-4.3# mkinitcpio -p linux
sh-4.3# passwd root

</code></pre><p>Network Configuration:</p><pre><code>sh-4.3# ip link
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default 
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
2: ens3: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP mode DEFAULT group default qlen 1000
    link/ether 52:54:94:b5:12:24 brd ff:ff:ff:ff:ff:ff
sh-4.3# pacman -S dhcpcd
sh-4.3# systemctl enable dhcpcd@ens3
ln -s '/usr/lib/systemd/system/dhcpcd@.service' '/etc/systemd/system/multi-user.target.wants/dhcpcd@ens3.service'

</code></pre><p>BootLoad Configuration:</p><pre><code># pacman -S grub
# grub-install --target=i386-pc --recheck --debug /dev/sda
# grub-mkconfig -o /boot/grub/grub.cfg

</code></pre><p>Umount and reboot:</p><pre><code>umount -R /mnt

</code></pre><h3 id=configuration-of-system>Configuration Of System</h3><p>Install openssh firstly, and net-tools for getting the ipaddress using ifconfig:</p><pre><code>pacman -S openssh
systemctl enable sshd
systemctl start sshd
pacman -S net-tools

</code></pre><p>Now you can use terminal for getting to the qemu-based machine, and sshd service should be enabled always.</p><p>Quickly setup an account, because using root is a bad idea.</p><pre><code># useradd -m -g root -G audio -s /bin/bash Trusty
# pacman -S sudo
# visudo
##
## User privilege specification
##
root ALL=(ALL) ALL
Trusty ALL=(ALL) NOPASSWD: ALL
## Locale settings
# Defaults env_keep += &quot;LANG LANGUAGE LINGUAS LC_* _XKB_CHARSET&quot;
Defaults env_keep += &quot;http_proxy https_proxy ftp_proxy ftps_proxy&quot;

</code></pre><p>Now you can use the newly added username &ldquo;Trusty&rdquo; for login.</p><p>Install yaourt, add following lines into the file /etc/pacman.conf:</p><pre><code>[archlinuxfr]
SigLevel = Never
Server = http://repo.archlinux.fr/$arch

</code></pre><p>Then update and install yaourt:</p><pre><code>sudo pacman -Syu &amp;&amp; sudo pacman -S yaourt

</code></pre><p>Next chapter we will begin to install softwares.</p></div><div class=post><h1 class=post-title><a href=http://purplepalmdash.github.io/2014/05/21/moving-from-working-pc-to-own-usb-disk-based-2/>Moving From Working PC To Own USB-Disk Based 2</a></h1><span class=post-date>May 21, 2014<br><a class=a_cat href=http://purplepalmdash.github.io/categories/technology>Technology</a></span><h3 id=install-software>Install Software</h3><h4 id=internet>Internet</h4><p>Chromium, we need this browser absolutesly:</p><pre><code>$ sudo pacman -S chromium
Select 1/8

</code></pre><p>Oh, we forget install X, so first we will install X:</p><h4 id=x-window>X Window</h4><p>Install xorg first:</p><pre><code>$ sudo pacman -S xorg xorg-xinit

</code></pre><p>Awesome Window Manager;</p><pre><code>$ sudo pacman -S awesome

</code></pre><p>Edit the .xinitrc file, add following lines:</p><pre><code>exec awesome

</code></pre><p>Necessary video driver:</p><pre><code>$ sudo pacman -S xf86-video-intel xf86-video-ati

</code></pre><h4 id=continue-internet>Continue Internet</h4><p>Firefox, another browser, pidgin, for chatting, thunderbird for email, wget for downloading:</p><pre><code>sudo pacman -S firefox pidgin thunderbird wget

</code></pre><h4 id=office>Office</h4><p>Libreoffice,need download 253MB, so take a break:</p><pre><code>$ sudo pacman -S libreoffice
# choose Enter-&gt; 25-&gt; Enter

</code></pre><h4 id=terminals>Terminals</h4><p>Install xterm first, initial term:</p><pre><code>$ sudo pacman -S xterm

</code></pre><p>xfce4-terminal will be installed in next chapter<code>Vncserver</code>.<br>gnome-terminal is a good option:</p><pre><code>$ sudo pacman -S gnome-terminal

</code></pre><h4 id=vncserver>Vncserver</h4><p>Install tigervnc</p><pre><code>$ sudo pacman -S tigervnc

</code></pre><p>Use xfce4 for remote vnc(For many users may not familiar with awesome desktop):</p><pre><code>$ sudo pacman -S xfce4 
# choose (default=all)

</code></pre><p>Configure vncserver:</p><pre><code>$ cat ~/.vnc/xstartup 
#!/bin/sh

export XKL_XMODMAP_DISABLE=1
exec startxfce4

</code></pre><p>With VNC, you can start up the X and let the chromium sync up its bookmarks.</p><h4 id=documents>Documents</h4><p>Install evince for viewing pdf and other documents:</p><pre><code>$ sudo pacman -S evince

</code></pre><p>Install gimp for processing pictures:</p><pre><code>$ sudo pacman -S gimp

</code></pre><h4 id=videofun>Video/Fun</h4><p>Install smplayer:</p><pre><code>sudo pacman -S smplayer

</code></pre><p>Without ALSA, you can do nothing, so install it.</p><pre><code>sudo pacman -S alsa-utils

</code></pre><h4 id=development>Development</h4><p>Install gvim and eclipse:</p><pre><code>$ sudo pacman -S gvim eclipse

</code></pre><p>Git and Subversion:</p><pre><code>$ sudo pacman -S git subversion

</code></pre><p>Wireshark and Tcpdump:</p><pre><code>$ sudo pacman -S wireshark-gtk tcpdump

</code></pre><p>ddd and gdb for debugging:</p><pre><code>$ sudo pacman -S ddd gdb

</code></pre><p>meld for comparing files:</p><pre><code>$ sudo pacman -S meld

</code></pre><h4 id=virtualization>Virtualization</h4><p>Install qemu and virtualbox:</p><pre><code>sudo pacman -S virtualbox qemu

</code></pre><h4 id=chinese-localization>Chinese Localization</h4><p>Install fonts for chinese:</p><pre><code>$ sudo pacman -S wqy-bitmapfont wqy-microhei wqy-microhei-lite wqy-zenhei

</code></pre><p>Install fcitx input method:</p><pre><code>$ sudo pacman -S fcitx fcitx-libpinyin fcitx-configtool fcitx-qt4 fcitx-qt5

</code></pre><p>Configuration will be wrote later.</p><h4 id=system-tools>System Tools</h4><p>rox for file browser:</p><pre><code>$ sudo pacman -S rox

</code></pre><p>gpicview for picture viewer:</p><pre><code>$ sudo pacman -S gpicview

</code></pre><p>Conky for viewing the tasks:</p><pre><code>$ sudo pacman -S conky

</code></pre><p>.conky file will be downloaded from the github(Later I will upload).
.xinitrc file will be uploaded to github.</p><p>Now step2 is OK, we will use usd-disk for rebooting.</p></div><ul class=pagination><li class=page-item><a href=/ class=page-link aria-label=First><span aria-hidden=true>&#171;&#171;</span></a></li><li class=page-item><a href=/page/185/ class=page-link aria-label=Previous><span aria-hidden=true>&#171;</span></a></li><li class=page-item><a class=page-link href=/>1</a></li><li class=page-item><a class=page-link href=/page/2/>2</a></li><li class=page-item><a class=page-link href=/page/3/>3</a></li><li class="page-item disabled"><span aria-hidden=true>&nbsp;&mldr;&nbsp;</span></li><li class=page-item><a class=page-link href=/page/185/>185</a></li><li class="page-item active"><a class=page-link href=/page/186/>186</a></li><li class=page-item><a class=page-link href=/page/187/>187</a></li><li class="page-item disabled"><span aria-hidden=true>&nbsp;&mldr;&nbsp;</span></li><li class=page-item><a class=page-link href=/page/234/>234</a></li><li class=page-item><a href=/page/187/ class=page-link aria-label=Next><span aria-hidden=true>&#187;</span></a></li><li class=page-item><a href=/page/234/ class=page-link aria-label=Last><span aria-hidden=true>&#187;&#187;</span></a></li></ul></div></div><script src=http://purplepalmdash.github.io/js/highlight.pack.js></script><script>hljs.initHighlightingOnLoad();</script></body></html>